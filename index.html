<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Polyglot.js by airbnb</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Polyglot.js</h1>
        <p>Give your JavaScript the ability to speak many languages.</p>

        <p class="view"><a href="https://github.com/airbnb/polyglot.js">View the Project on GitHub <small>airbnb/polyglot.js</small></a></p>


        <ul>
          <li><a href="https://github.com/airbnb/polyglot.js/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/airbnb/polyglot.js/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/airbnb/polyglot.js">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="polyglotjs" class="anchor" href="#polyglotjs"><span class="octicon octicon-link"></span></a>Polyglot.js</h1>

<p>Polyglot.js is a tiny I18n helper library written in JavaScript, made to
work both in the browser and in CommonJS environments (Node). It provides a simple solution for interpolation and pluralization, based off of Airbnb's
experience adding I18n functionality to its Backbone.js and Node apps. Polyglot has zero dependencies.</p>

<p>I18n is incredibly important for us at <a href="https://www.airbnb.com/">Airbnb</a>,
as we have listings in 192 countries, and we translate our site into 30-odd different languages.
We're also <a href="https://www.airbnb.com/jobs/departments/engineering">hiring talented engineers</a>
to help us scale up to meet the challenges of buliding a global marketplace.</p>

<p>View the <a href="http://airbnb.github.com/polyglot.js">documentation on Github</a>.</p>

<p>View the <a href="http://airbnb.github.com/polyglot.js/polyglot.html">annotated source</a>.</p>

<p>Download the <a href="https://raw.github.com/airbnb/polyglot.js/master/build/polyglot.js">development version</a>: 7.9kb, unminified with comments.</p>

<p>Download the <a href="https://raw.github.com/airbnb/polyglot.js/master/build/polyglot.min.js">production version</a>: 2.8kb, minified (1.3kb gzipped).</p>

<p>Polylglot is agnostic to your translation backend. It doesn't perform any
translation; it simply gives you a way to manage translated phrases from
your client- or server-side JavaScript application.</p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>For use with Node, install with <a href="http://npmjs.org">NPM</a>:</p>

<pre><code>$ npm install node-polyglot
</code></pre>

<h3>
<a name="running-the-tests" class="anchor" href="#running-the-tests"><span class="octicon octicon-link"></span></a>Running the tests</h3>

<pre><code>$ npm install

$ npm test

  t
    ✓ should translate a simple string
    ✓ should return the key if translation not found
    ✓ should interpolate
    ✓ should interpolate the same placeholder multiple times
    ✓ should allow you to supply default values
    ◦ should return the non-interpolated key if not initialized with allowMissing     ✓ should return the non-interpolated key if not initialized with allowMissing and translation not found
    ◦ should return an interpolated key if initialized with allowMissing and trans    ✓ should return an interpolated key if initialized with allowMissing and translation not found
    ✓ should support nested phrase objects

  pluralize
    ✓ should support pluralization with an integer
    ✓ should accept a number as a shortcut to pluralize a word

  locale
    ✓ should default to 'en'
    ✓ should get and set locale

  extend
    ✓ should support multiple extends, overriding old keys
    ✓ shouldn't forget old keys
    ✓ should support optional `prefix` argument
    ✓ should support nested object

  clear
    ✓ should wipe out old phrases

  replace
    ✓ should wipe out old phrases and replace with new phrases


  ✔ 18 tests complete (12ms)
</code></pre>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage</h2>

<h3>
<a name="instantiation" class="anchor" href="#instantiation"><span class="octicon octicon-link"></span></a>Instantiation</h3>

<p>First, create an instance of the <code>Polyglot</code> class, which you will use for translation.</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">polyglot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Polyglot</span><span class="p">();</span>
</pre></div>

<p>Polyglot is class-based so you can maintain different sets of phrases at the same time, possibly in different locales. This is very useful for example when serving requests with <a href="http://expressjs.com">Express</a>, because each request may have a different locale, and you don't want concurrent requests to clobber each other's phrases.</p>

<h3>
<a name="translation" class="anchor" href="#translation"><span class="octicon octicon-link"></span></a>Translation</h3>

<p>Tell Polyglot what to say by simply giving it a phrases object,
where the key is the canonical name of the phrase and the value is
the already-translated string.</p>

<div class="highlight highlight-js"><pre><span class="nx">polyglot</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="s2">"hello"</span><span class="o">:</span> <span class="s2">"Hello"</span>
<span class="p">});</span>

<span class="nx">polyglot</span><span class="p">.</span><span class="nx">t</span><span class="p">(</span><span class="s2">"hello"</span><span class="p">);</span>
<span class="o">=&gt;</span> <span class="s2">"Hello"</span>
</pre></div>

<p>You can also pass a mapping at instantiation, using the key <code>phrases</code>:</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">polyglot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Polyglot</span><span class="p">({</span><span class="nx">phrases</span><span class="o">:</span> <span class="p">{</span><span class="s2">"hello"</span><span class="o">:</span> <span class="s2">"Hello"</span><span class="p">}});</span>
</pre></div>

<p>Polyglot doesn't do the translation for you. It's up to you to give it
the proper phrases for the user's locale.</p>

<p>A common pattern is to gather a hash of phrases in your backend, and output
them in a <code>&lt;script&gt;</code> tag at the bottom of the document.  For example, in Rails:</p>

<p><code>app/controllers/home_controller.rb</code></p>

<div class="highlight highlight-ruby"><pre><span class="k">def</span> <span class="nf">index</span>
  <span class="vi">@phrases</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">"home.login"</span> <span class="o">=&gt;</span> <span class="no">I18n</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="s2">"home.login"</span><span class="p">),</span>
    <span class="s2">"home.signup"</span> <span class="o">=&gt;</span> <span class="no">I18n</span><span class="o">.</span><span class="n">t</span><span class="p">(</span><span class="s2">"home.signup"</span><span class="p">),</span>
    <span class="o">.</span><span class="n">.</span><span class="o">.</span>
  <span class="p">}</span>
<span class="k">end</span>
</pre></div>

<p><code>app/views/home/index.html.erb</code></p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script&gt;</span>
  <span class="kd">var</span> <span class="nx">polyglot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Polyglot</span><span class="p">({</span><span class="nx">phrases</span><span class="o">:</span> <span class="o">&lt;%=</span> <span class="nx">raw</span> <span class="err">@</span><span class="nx">phrases</span><span class="p">.</span><span class="nx">to_json</span> <span class="o">%&gt;</span><span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p>And now you can utilize i.e. <code>polyglot.t("home.login")</code> in your JavaScript application
or Handlebars templates.</p>

<h3>
<a name="interpolation" class="anchor" href="#interpolation"><span class="octicon octicon-link"></span></a>Interpolation</h3>

<p><code>Polyglot.t()</code> also provides interpolation. Pass an object with key-value pairs of
interpolation arguments as the second parameter.</p>

<div class="highlight highlight-js"><pre><span class="nx">polyglot</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="s2">"hello_name"</span><span class="o">:</span> <span class="s2">"Hola, %{name}."</span>
<span class="p">});</span>

<span class="nx">polyglot</span><span class="p">.</span><span class="nx">t</span><span class="p">(</span><span class="s2">"hello_name"</span><span class="p">,</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">"DeNiro"</span><span class="p">});</span>
<span class="o">=&gt;</span> <span class="s2">"Hola, DeNiro."</span>
</pre></div>

<p>Polyglot also supports nested phrase objects.</p>

<div class="highlight highlight-js"><pre><span class="nx">polyglot</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="s2">"nav"</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">"hello"</span><span class="o">:</span> <span class="s2">"Hello"</span><span class="p">,</span>
    <span class="s2">"hello_name"</span><span class="o">:</span> <span class="s2">"Hello, %{name}"</span><span class="p">,</span>
    <span class="s2">"sidebar"</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">"welcome"</span><span class="o">:</span> <span class="s2">"Welcome"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="nx">polyglot</span><span class="p">.</span><span class="nx">t</span><span class="p">(</span><span class="s2">"nav.sidebar.welcome"</span><span class="p">);</span>
<span class="o">=&gt;</span> <span class="s2">"Welcome"</span>
</pre></div>

<h3>
<a name="pluralization" class="anchor" href="#pluralization"><span class="octicon octicon-link"></span></a>Pluralization</h3>

<p>For pluralization to work properly, you need to tell Polyglot what the current locale is.  You can use <code>polyglot.locale("fr")</code> to set the locale to, for example, French. This method is also a getter:</p>

<div class="highlight highlight-js"><pre><span class="nx">polyglot</span><span class="p">.</span><span class="nx">locale</span><span class="p">()</span>
<span class="o">=&gt;</span> <span class="s2">"fr"</span>
</pre></div>

<p>You can also pass this in during instantiation.</p>

<div class="highlight highlight-js"><pre><span class="kd">var</span> <span class="nx">polyglot</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Polyglot</span><span class="p">({</span><span class="nx">locale</span><span class="o">:</span> <span class="s2">"fr"</span><span class="p">});</span>
</pre></div>

<p>Currently, the <em>only</em> thing that Polyglot uses this locale setting for is pluralization.</p>

<p>Polyglot provides a very basic pattern for providing
pluralization based on a single string that contains all plural forms for a given phrase. Because various languages have different nominal forms for zero, one, and multiple, and because the noun can be before or after the count, we have to be overly explicit
about the possible phrases.</p>

<p>To get a pluralized phrase, still use <code>polyglot.t()</code> but use a specially-formatted phrase string that separates the plural forms by the delimeter <code>||||</code>, or four vertical pipe characters.</p>

<p>For pluralizing "car" in English, Polyglot assumes you have a phrase of the form:</p>

<div class="highlight highlight-js"><pre><span class="nx">polyglot</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="s2">"num_cars"</span><span class="o">:</span> <span class="s2">"%{smart_count} car |||| %{smart_count} cars"</span><span class="p">,</span>
<span class="p">});</span>
</pre></div>

<p>English (and German, Spanish, Italian, and a few others) there are only two plural forms: singular and not-singular.</p>

<p>Some languages get a bit more complicated. In Czech, there are three separate forms: 1, 2 through 4, and 5 and up. Russian is even crazier.</p>

<p><code>polyglot.t()</code> will choose the appropriate phrase based
on the provided <code>smart_count</code> option, whose value is a number.</p>

<div class="highlight highlight-js"><pre><span class="nx">polyglot</span><span class="p">.</span><span class="nx">t</span><span class="p">(</span><span class="s2">"num_cars"</span><span class="p">,</span> <span class="p">{</span><span class="nx">smart_count</span><span class="o">:</span> <span class="mi">0</span><span class="p">});</span>
<span class="o">=&gt;</span> <span class="s2">"0 cars"</span>

<span class="nx">polyglot</span><span class="p">.</span><span class="nx">t</span><span class="p">(</span><span class="s2">"num_cars"</span><span class="p">,</span> <span class="p">{</span><span class="nx">smart_count</span><span class="o">:</span> <span class="mi">1</span><span class="p">});</span>
<span class="o">=&gt;</span> <span class="s2">"1 car"</span>

<span class="nx">polyglot</span><span class="p">.</span><span class="nx">t</span><span class="p">(</span><span class="s2">"num_cars"</span><span class="p">,</span> <span class="p">{</span><span class="nx">smart_count</span><span class="o">:</span> <span class="mi">2</span><span class="p">});</span>
<span class="o">=&gt;</span> <span class="s2">"2 cars"</span>
</pre></div>

<p>As a shortcut, you can also pass a number to the second parameter:</p>

<div class="highlight highlight-js"><pre><span class="nx">polyglot</span><span class="p">.</span><span class="nx">t</span><span class="p">(</span><span class="s2">"num_cars"</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="o">=&gt;</span> <span class="s2">"2 cars"</span>
</pre></div>

<h2>
<a name="public-methods" class="anchor" href="#public-methods"><span class="octicon octicon-link"></span></a>Public Methods</h2>

<h3>
<a name="polyglotprototypeextendphrases" class="anchor" href="#polyglotprototypeextendphrases"><span class="octicon octicon-link"></span></a>Polyglot.prototype.extend(phrases)</h3>

<p>Use <code>extend</code> to tell Polyglot how to translate a given key.</p>

<div class="highlight highlight-js"><pre><span class="nx">polyglot</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="s2">"hello"</span><span class="o">:</span> <span class="s2">"Hello"</span><span class="p">,</span>
  <span class="s2">"hello_name"</span><span class="o">:</span> <span class="s2">"Hello, %{name}"</span>
<span class="p">});</span>
</pre></div>

<p>The key can be any string.  Feel free to call <code>extend</code> multiple times;
it will override any phrases with the same key, but leave existing phrases
untouched.</p>

<h3>
<a name="polyglotprototypeclear" class="anchor" href="#polyglotprototypeclear"><span class="octicon octicon-link"></span></a>Polyglot.prototype.clear()</h3>

<p>Clears all phrases. Useful for special cases, such as freeing
up memory if you have lots of phrases but no longer need to
perform any translation. Also used internally by <code>replace</code>.</p>

<h3>
<a name="polyglotprototypereplacephrases" class="anchor" href="#polyglotprototypereplacephrases"><span class="octicon octicon-link"></span></a>Polyglot.prototype.replace(phrases)</h3>

<p>Completely replace the existing phrases with a new set of phrases.
Normally, just use <code>extend</code> to add more phrases, but under certain
circumstances, you may want to make sure no old phrases are lying around.</p>

<h3>
<a name="polyglotprototypetkey-interpolationoptions" class="anchor" href="#polyglotprototypetkey-interpolationoptions"><span class="octicon octicon-link"></span></a>Polyglot.prototype.t(key, interpolationOptions)</h3>

<p>The most-used method. Provide a key, and <code>t()</code> will return the
phrase.</p>

<pre><code>polyglot.t("hello");
=&gt; "Hello"
</code></pre>

<p>The phrase value is provided first by a call to <code>polyglot.extend()</code> or
<code>polyglot.replace()</code>.</p>

<p>Pass in an object as the second argument to perform interpolation.</p>

<pre><code>polyglot.t("hello_name", {name: "Spike"});
=&gt; "Hello, Spike"
</code></pre>

<p>Pass a number as the second argument as a shortcut to <code>smart_count</code>:</p>

<div class="highlight highlight-js"><pre><span class="c1">// same as: polyglot.t("car", {smart_count: 2});</span>
<span class="nx">polyglot</span><span class="p">.</span><span class="nx">t</span><span class="p">(</span><span class="s2">"car"</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="o">=&gt;</span> <span class="s2">"2 cars"</span>
</pre></div>

<p>If you like, you can provide a default value in case the phrase is missing.
Use the special option key "_" to specify a default.</p>

<div class="highlight highlight-js"><pre><span class="nx">polyglot</span><span class="p">.</span><span class="nx">t</span><span class="p">(</span><span class="s2">"i_like_to_write_in_language"</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">_</span><span class="o">:</span> <span class="s2">"I like to write in %{language}."</span><span class="p">,</span>
  <span class="nx">language</span><span class="o">:</span> <span class="s2">"JavaScript"</span>
<span class="p">});</span>
<span class="o">=&gt;</span> <span class="s2">"I like to write in JavaScript."</span>
</pre></div>

<h2>
<a name="history" class="anchor" href="#history"><span class="octicon octicon-link"></span></a>History</h2>

<h3>
<a name="v040-may-22-2014" class="anchor" href="#v040-may-22-2014"><span class="octicon octicon-link"></span></a>v0.4.0: May 22, 2014</h3>

<ul>
<li>Added support for nested phrase objects to <code>extend()</code> and in the <code>phrases</code> option in the constructor.</li>
</ul><h3>
<a name="v030-august-6-2013" class="anchor" href="#v030-august-6-2013"><span class="octicon octicon-link"></span></a>v0.3.0: August 6, 2013</h3>

<ul>
<li>
<em>Breaking change</em>: Removed <code>pluralize()</code> method; instead, just use the <code>t()</code> method, passing in a <code>smart_count</code> option.</li>
<li>
<em>Breaking change</em>: Removed the ability to use <code>Array</code>, <code>Backbone.Collection</code>, etc. instances for the <code>smart_count</code> option; instead, must pass a <code>Number</code>.</li>
<li>Allow passing <code>Number</code> as second argument to <code>t()</code>, which gets converted to the options object <code>{smart_count: &lt;my number&gt;}</code>.</li>
</ul><h3>
<a name="v021-may-2-2013" class="anchor" href="#v021-may-2-2013"><span class="octicon octicon-link"></span></a>v0.2.1: May 2, 2013</h3>

<ul>
<li>Added <code>allowMissing</code> option to let the phrase key be the default translation (thanks <a href="https://github.com/ziad-saab" class="user-mention">@ziad-saab</a>).</li>
</ul><h3>
<a name="v020-dec-20-2012" class="anchor" href="#v020-dec-20-2012"><span class="octicon octicon-link"></span></a>v0.2.0: Dec 20, 2012</h3>

<ul>
<li>
<em>Breaking change</em>: Moved from Singleton pattern to class-based. Now you create an instance of the <code>Polyglot</code> class rather than using class methods directly on it. The reason is to allow maintaining multiple sets of phrases, which is something we ran into at Airbnb with a highly-concurrent Express app.</li>
<li>
<em>Breaking change</em>: Removed the built-in Handlebars helpers, because Handlebars is a singleton, and it's messy to create a single helper function that can be bound to different Polyglot instances.  Instead, it's super easy to create your own, based on your requirements.</li>
</ul>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/airbnb">airbnb</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>